SET DB = 'EMP';
SET TBL_SCHEMA = 'HRDATA';
SET PROC_SCHEMA = 'PROCS';

USE DATABASE $DB;   --NOT CORRECT
USE DATABASE IDENTIFIER($DB);   --CORRECT

CREATE SCHEMA IF NOT EXISTS ($PROC_SCHEMA); -- NOT CORRECT
CREATE SCHEMA IF NOT EXISTS IDENTIFIER($TBL_SCHEMA);    -- CORRECT
CREATE SCHEMA IF NOT EXISTS IDENTIFIER($PROC_SCHEMA);   -- CORRECT

USE SCHEMA IDENTIFIER($PROC_SCHEMA);

-- PROCEDURE TO RETURN THE ROW COUNTS OF 4 TABLES IN EMP DATABASE.
CREATE OR REPLACE PROCEDURE EMP.PROCS.SP_LITERALS_IDENTIFIERS_DEMO("DBNAME" VARCHAR)
RETURNS VARCHAR
LANGUAGE SQL
COMMENT = 'Demo Program on literals and Identifiers'
EXECUTE AS CALLER
AS

DECLARE
    TABLE1 VARCHAR;
    TABLE2 VARCHAR DEFAULT 'departments';
    DEPT INTEGER;
    EMPL INTEGER;
    CNTRY INTEGER;
    LOC INTEGER;

BEGIN
    TABLE1 := 'employees';
    LET TABLE3 := 'countries';

    USE DATABASE IDENTIFIER(:DBNAME);
    USE SCHEMA IDENTIFIER($TBL_SCHEMA);

    SELECT COUNT(*) INTO :EMPL FROM TABLE(:TABLE1);
    SELECT COUNT(*) INTO :DEPT FROM TABLE(:TABLE2);
    SELECT COUNT(*) INTO :CNTRY FROM TABLE(:TABLE3);
    SELECT COUNT(*) INTO :LOC FROM TABLE('EMP.HRDATA.LOCATIONS');

    RETURN 'employees COUNT ' ||EMPL|| ', departments COUNT ' ||DEPT|| ', countries COUNT ' ||CNTRY|| ', locations COUNT ' ||LOC;
    END

CALL EMP.PROCS.SP_LITERALS_IDENTIFIERS_DEMO('EMP');